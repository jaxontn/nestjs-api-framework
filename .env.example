# =============================================================================
# NestJS API Framework - Environment Configuration
# =============================================================================
# Copy this file to .env and configure the values for your environment.
# Remove comments and sensitive data from production .env files.

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node.js environment (development, staging, production)
NODE_ENV=development

# Application name
APP_NAME=NestJS API Framework

# Application version
APP_VERSION=1.0.0

# Server configuration
APP_HOST=0.0.0.0
APP_PORT=3001
APP_GLOBAL_PREFIX=api

# Graceful shutdown timeout in milliseconds
APP_SHUTDOWN_TIMEOUT=10000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database type (mysql, postgres, sqlite, etc.)
DB_TYPE=mysql

# Database connection settings
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=your_db_username
DB_PASSWORD=your_db_password
DB_DATABASE=your_database_name

# Database connection pool settings
DB_CONNECTION_LIMIT=50
DB_ACQUIRE_TIMEOUT=60000
DB_TIMEOUT=60000

# Database behavior settings
DB_SYNCHRONIZE=false
DB_LOGGING=true
DB_TIMEZONE=+00:00
DB_CHARSET=utf8mb4

# Connection management
DB_AUTO_LOAD_ENTITIES=true
DB_LAZY_LOAD_ENTITIES=true

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=nestjs-api-framework
JWT_AUDIENCE=nestjs-api-users
JWT_ALGORITHMS=HS256

# Role-based access control
AUTH_ROLE_HIERARCHY={"guest":0,"user":1,"moderator":2,"admin":3,"super_admin":4}
AUTH_DEFAULT_ROLES=["user"]
AUTH_ADMIN_ROLES=["admin","super_admin"]

# Email verification settings
AUTH_EMAIL_VERIFICATION_REQUIRED=false

# Terms of service acceptance
AUTH_TERMS_ACCEPTANCE_REQUIRED=false

# Password requirements
AUTH_PASSWORD_MIN_LENGTH=8
AUTH_PASSWORD_REQUIRE_UPPERCASE=true
AUTH_PASSWORD_REQUIRE_LOWERCASE=true
AUTH_PASSWORD_REQUIRE_NUMBERS=true
AUTH_PASSWORD_REQUIRE_SPECIAL_CHARS=false

# Token blacklist settings
AUTH_ENABLE_BLACKLIST=false

# Rate limiting settings
AUTH_ENABLE_RATE_LIMIT=false

# =============================================================================
# API ACCESS CONFIGURATION
# =============================================================================

# API key settings (alternative to JWT)
VALID_API_KEYS=["api-key-1","api-key-2"]

# Valid bearer tokens (for testing)
VALID_BEARER_TOKENS=["bearer-token-1","bearer-token-2"]

# Basic authentication users (for testing)
BASIC_AUTH_USERS={"admin":"admin123","user":"user123"}

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed origins (comma-separated or array format)
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Origin,X-Requested-With,Content-Type,Accept,Authorization,X-Correlation-ID,X-API-Key
CORS_EXPOSED_HEADERS=X-Total-Count,X-Page-Count,X-Correlation-ID
CORS_MAX_AGE=86400

# =============================================================================
# SWAGGER/OPENAPI DOCUMENTATION
# =============================================================================

# Enable/disable Swagger documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/api/docs

# Documentation information
SWAGGER_TITLE=NestJS API Framework
SWAGGER_DESCRIPTION=A comprehensive, production-ready NestJS API framework
SWAGGER_VERSION=1.0.0
SWAGGER_CONTACT_NAME=API Support
SWAGGER_CONTACT_URL=https://example.com/support
SWAGGER_CONTACT_EMAIL=support@example.com
SWAGGER_LICENSE_NAME=MIT
SWAGGER_LICENSE_URL=https://opensource.org/licenses/MIT

# =============================================================================
# RESPONSE & VALIDATION
# =============================================================================

# Response configuration
RESPONSE_INCLUDE_METRICS=true
RESPONSE_INCLUDE_DETAILS=false

# Validation pipe configuration
VALIDATION_WHITELIST=true
VALIDATION_FORBID_NON_WHITELISTED=true
VALIDATION_TRANSFORM=true
VALIDATION_SKIP_MISSING_PROPERTIES=false
VALIDATION_SKIP_NULL_PROPERTIES=false
VALIDATION_SKIP_UNDEFINED_PROPERTIES=false
VALIDATION_INCLUDE_VALUE_IN_ERROR=false

# Password validation requirements
VALIDATION_PASSWORD_MIN_LENGTH=8
VALIDATION_PASSWORD_REQUIRE_UPPERCASE=true
VALIDATION_PASSWORD_REQUIRE_LOWERCASE=true
VALIDATION_PASSWORD_REQUIRE_NUMBERS=true
VALIDATION_PASSWORD_REQUIRE_SPECIAL_CHARS=false

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging settings
LOG_LEVEL=debug,info,warn,error
LOG_FORMAT=json
LOG_ENABLE_DETAILED=true

# Request logging
LOG_ENABLE_REQUEST_LOGGING=true
LOG_SLOW_REQUEST_THRESHOLD=1000

# Performance monitoring
LOG_ENABLE_PERFORMANCE_MONITORING=true

# =============================================================================
# HEALTH MONITORING
# =============================================================================

# Health check settings
HEALTH_ENABLE_DETAILED=true
HEALTH_ENABLE_METRICS=true
HEALTH_ENABLE_SYSTEM_METRICS=true
HEALTH_ENABLE_DATABASE_CHECK=true
HEALTH_ENABLE_MEMORY_CHECK=true
HEALTH_ENABLE_CPU_CHECK=true
HEALTH_ENABLE_DISK_CHECK=true

# Health check intervals and thresholds
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_MEMORY_THRESHOLD=80
HEALTH_CPU_THRESHOLD=75
HEALTH_DISK_THRESHOLD=90

# Health history
HEALTH_ENABLE_HISTORY=false
HEALTH_HISTORY_RETENTION=24

# Health notifications
HEALTH_ENABLE_NOTIFICATIONS=false

# =============================================================================
# PERFORMANCE & MONITORING
# =============================================================================

# Compression settings
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Helmet security headers
HELMET_CSP=true
HELMET_HSTS_MAX_AGE=31536000
HELMET_HSTS_SUBDOMAINS=true
HELMET_HSTS_PRELOAD=false
HELMET_COEP=false
HELMET_COOP=false
HELMET_CORP=false

# =============================================================================
# NOTIFICATIONS & WEBHOOKS
# =============================================================================

# Startup notification webhook
NOTIFICATIONS_STARTUP_WEBHOOK=

# Email notifications (if configured)
NOTIFICATIONS_EMAIL_ENABLED=false
NOTIFICATIONS_EMAIL_RECIPIENTS=admin@example.com
NOTIFICATIONS_EMAIL_SMTP_HOST=smtp.example.com
NOTIFICATIONS_EMAIL_SMTP_PORT=587
NOTIFICATIONS_EMAIL_SMTP_SECURE=false

# Slack notifications (if configured)
NOTIFICATIONS_SLACK_ENABLED=false
NOTIFICATIONS_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
NOTIFICATIONS_SLACK_CHANNEL=#api-alerts

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================

# Redis (for caching, sessions, etc.)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Elasticsearch (for logging and search)
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# SMTP (for email services)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# =============================================================================
# DEVELOPMENT ONLY (Remove from production)
# =============================================================================

# Debug mode
DEBUG=nestjs-api:*

# Enable hot reload (development only)
HMR=true

# Source map generation
SOURCE_MAPS=true

# =============================================================================
# TESTING
# =============================================================================

# Test database (for automated tests)
TEST_DB_HOST=localhost
TEST_DB_PORT=3306
TEST_DB_USERNAME=test_user
TEST_DB_PASSWORD=test_password
TEST_DB_DATABASE=test_database

# Mock external services (for testing)
TEST_MOCK_EXTERNAL_SERVICES=true

# =============================================================================
# EXAMPLE VALUES FOR QUICK START
# =============================================================================
# Uncomment and modify these values for quick development setup:
#
# JWT_SECRET=your-32-character-secret-key-here-change-it
# DB_PASSWORD=mysecretpassword
# CORS_ORIGIN=http://localhost:3000
# SWAGGER_ENABLED=true
# DB_SYNCHRONIZE=true
# LOG_LEVEL=debug

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Always use strong, unique secrets in production
# 2. Never commit .env files to version control
# 3. Use environment-specific configurations
# 4. Regularly rotate secrets and keys
# 5. Enable all security features in production
# 6. Use HTTPS in production environments
# 7. Set up proper CORS origins for production